resource "google_bigquery_dataset" "{{ dataset_name }}" {
  dataset_id = "{{ dataset_name }}"
  location   = "{{ location }}"
  
  {% if labels %}
  labels = {
    {% for key, value in labels.items() %}
    {{ key }} = "{{ value }}"
    {% endfor %}
  }
  {% endif %}
  
  access {
    role          = "OWNER"
    user_by_email = "{{ service_account }}"
  }

  # Optional: Set default table expiration
  # default_table_expiration_ms = 3600000

  # Optional: Delete protection
  # deletion_protection = true
}
